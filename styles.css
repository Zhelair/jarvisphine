/* styles.css — Jarvisphine v2 — Iron Man / JARVIS HUD */

@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700;900&family=Rajdhani:wght@300;400;500;600&display=swap');

/* ── Variables ─────────────────────────────────────── */
:root {
  --bg: #020408;
  --bg2: #060c14;
  --bg3: #0a1520;
  --bg4: #0d1c2e;
  --border: #0f3460;
  --border2: #1a4a7a;
  --cyan: #00d4ff;
  --cyan2: #0099cc;
  --gold: #f5a623;
  --gold2: #ff8c00;
  --green: #00ff88;
  --red: #ff3366;
  --text: #c8e8ff;
  --text2: #6a9bc4;
  --text3: #2a4a6a;
  --glow-cyan: 0 0 10px rgba(0,212,255,0.4), 0 0 20px rgba(0,212,255,0.15);
  --glow-gold: 0 0 10px rgba(245,166,35,0.4), 0 0 20px rgba(245,166,35,0.15);
  --glow-green: 0 0 10px rgba(0,255,136,0.4);
  --radius: 4px;
  --radius-lg: 8px;
}

/* ── Reset ─────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; overflow: hidden; background: #000; }

body {
  font-family: 'Rajdhani', sans-serif;
  background: var(--bg);
  color: var(--text);
  display: flex;
  flex-direction: column;
  max-width: 480px;
  margin: 0 auto;
  position: relative;
  /* Scanline overlay */
  background-image: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 212, 255, 0.015) 2px,
    rgba(0, 212, 255, 0.015) 4px
  );
}

/* ── Boot Overlay ──────────────────────────────────── */
#bootOverlay {
  position: fixed;
  inset: 0;
  background: var(--bg);
  z-index: 999;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 20px;
  transition: opacity 0.8s;
}

#bootOverlay.hidden { opacity: 0; pointer-events: none; }

.boot-arc {
  width: 80px; height: 80px;
  border-radius: 50%;
  border: 2px solid var(--cyan);
  box-shadow: var(--glow-cyan), inset 0 0 20px rgba(0,212,255,0.2);
  display: flex; align-items: center; justify-content: center;
  animation: arcPulse 1.5s ease-in-out infinite;
  position: relative;
}

.boot-arc::before {
  content: '';
  position: absolute;
  width: 50px; height: 50px;
  border-radius: 50%;
  border: 1px solid var(--gold);
  box-shadow: var(--glow-gold);
  animation: arcPulse 1.5s ease-in-out infinite reverse;
}

.boot-arc-inner {
  width: 20px; height: 20px;
  border-radius: 50%;
  background: var(--cyan);
  box-shadow: var(--glow-cyan);
  animation: arcPulse 0.8s ease-in-out infinite;
}

@keyframes arcPulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.6; transform: scale(0.95); }
}

#bootText {
  font-family: 'Orbitron', sans-serif;
  font-size: 11px;
  color: var(--cyan);
  letter-spacing: 3px;
  text-shadow: var(--glow-cyan);
  animation: textFlicker 0.1s infinite;
}

@keyframes textFlicker {
  0%, 98% { opacity: 1; }
  99% { opacity: 0.8; }
}

/* ── Header ────────────────────────────────────────── */
.header {
  padding: 12px 16px 10px;
  background: var(--bg2);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  gap: 12px;
  flex-shrink: 0;
  position: relative;
  overflow: hidden;
}

.header::after {
  content: '';
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--cyan), var(--gold), var(--cyan), transparent);
  animation: headerLine 3s linear infinite;
}

@keyframes headerLine {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

.header-avatar {
  width: 38px; height: 38px;
  border-radius: 50%;
  border: 1px solid var(--cyan);
  box-shadow: var(--glow-cyan);
  display: flex; align-items: center; justify-content: center;
  font-family: 'Orbitron', sans-serif;
  font-weight: 700;
  font-size: 13px;
  color: var(--cyan);
  background: var(--bg3);
  flex-shrink: 0;
  animation: avatarPulse 3s ease-in-out infinite;
}

@keyframes avatarPulse {
  0%, 100% { box-shadow: var(--glow-cyan); }
  50% { box-shadow: 0 0 20px rgba(0,212,255,0.6), 0 0 40px rgba(0,212,255,0.2); }
}

.header-info h1 {
  font-family: 'Orbitron', sans-serif;
  font-size: 15px;
  font-weight: 700;
  letter-spacing: 2px;
  color: var(--cyan);
  text-shadow: var(--glow-cyan);
  text-transform: uppercase;
}

.header-info p {
  font-size: 10px;
  color: var(--text3);
  letter-spacing: 2px;
  text-transform: uppercase;
  margin-top: 2px;
  font-family: 'Orbitron', sans-serif;
}

.status-dot {
  width: 8px; height: 8px;
  border-radius: 50%;
  background: var(--green);
  margin-left: auto;
  box-shadow: var(--glow-green);
  animation: statusPulse 2s infinite;
}

@keyframes statusPulse {
  0%, 100% { opacity: 1; box-shadow: var(--glow-green); }
  50% { opacity: 0.5; box-shadow: none; }
}

/* ── Screens ────────────────────────────────────────── */
.screen { display: none; flex: 1; overflow-y: auto; overflow-x: hidden; }
.screen.active { display: flex; flex-direction: column; }
.screen::-webkit-scrollbar { width: 2px; }
.screen::-webkit-scrollbar-thumb { background: var(--border2); }

/* ── Chat Screen ────────────────────────────────────── */
#chatMessages {
  flex: 1; overflow-y: auto;
  padding: 16px; display: flex;
  flex-direction: column; gap: 14px;
  scroll-behavior: smooth;
}

#chatMessages::-webkit-scrollbar { width: 2px; }
#chatMessages::-webkit-scrollbar-thumb { background: var(--border); }

.message { display: flex; gap: 10px; align-items: flex-end; animation: msgIn 0.3s ease; }
.message-user { flex-direction: row-reverse; }

@keyframes msgIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.avatar {
  width: 30px; height: 30px; border-radius: 50%;
  border: 1px solid var(--cyan); box-shadow: var(--glow-cyan);
  display: flex; align-items: center; justify-content: center;
  font-family: 'Orbitron', sans-serif; font-weight: 700; font-size: 11px;
  color: var(--cyan); background: var(--bg3); flex-shrink: 0;
}

.bubble {
  max-width: 78%; padding: 10px 14px;
  font-size: 14px; line-height: 1.55;
  font-family: 'Rajdhani', sans-serif; font-weight: 500;
}

.message-jarvis .bubble {
  background: var(--bg3);
  border: 1px solid var(--border);
  border-left: 2px solid var(--cyan);
  border-radius: 0 var(--radius-lg) var(--radius-lg) var(--radius-lg);
  color: var(--text);
  box-shadow: inset 0 0 20px rgba(0,212,255,0.03);
}

.message-user .bubble {
  background: linear-gradient(135deg, #0d2a4a, #0a1f38);
  border: 1px solid var(--gold);
  border-right: 2px solid var(--gold);
  border-radius: var(--radius-lg) 0 var(--radius-lg) var(--radius-lg);
  color: var(--text);
  box-shadow: inset 0 0 20px rgba(245,166,35,0.05);
}

/* Typing */
.typing { display: flex; align-items: center; gap: 6px; padding: 14px 16px; }
.typing span {
  width: 6px; height: 6px; border-radius: 50%;
  background: var(--cyan); box-shadow: var(--glow-cyan);
  animation: typeBounce 1.2s infinite;
}
.typing span:nth-child(2) { animation-delay: 0.2s; background: var(--gold); }
.typing span:nth-child(3) { animation-delay: 0.4s; }

@keyframes typeBounce {
  0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
  30% { transform: translateY(-8px); opacity: 1; }
}

/* Chat input */
.chat-input-area {
  padding: 10px 14px;
  background: var(--bg2);
  border-top: 1px solid var(--border);
  display: flex; gap: 8px; align-items: flex-end;
  flex-shrink: 0;
}

#chatInput {
  flex: 1;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 10px 14px;
  font-family: 'Rajdhani', sans-serif;
  font-size: 14px; font-weight: 500;
  color: var(--text);
  resize: none; outline: none;
  max-height: 100px; line-height: 1.4;
  transition: border-color 0.2s, box-shadow 0.2s;
  letter-spacing: 0.5px;
}

#chatInput:focus {
  border-color: var(--cyan);
  box-shadow: 0 0 8px rgba(0,212,255,0.2);
}
#chatInput::placeholder { color: var(--text3); }

#sendBtn {
  width: 40px; height: 40px;
  border-radius: var(--radius);
  background: linear-gradient(135deg, var(--cyan2), var(--cyan));
  border: none; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
  transition: all 0.15s;
  box-shadow: var(--glow-cyan);
}
#sendBtn:hover { transform: scale(1.05); box-shadow: 0 0 15px rgba(0,212,255,0.5); }
#sendBtn:active { transform: scale(0.95); }
#sendBtn svg { width: 16px; height: 16px; fill: #000; }

/* Voice button */
#voiceBtn {
  width: 40px; height: 40px;
  border-radius: var(--radius);
  background: var(--bg3);
  border: 1px solid var(--border2);
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
  transition: all 0.15s;
  color: var(--text2);
  font-size: 18px;
  user-select: none;
}
#voiceBtn:hover { border-color: var(--gold); color: var(--gold); }
#voiceBtn.recording {
  border-color: var(--red);
  background: rgba(255,51,102,0.15);
  color: var(--red);
  box-shadow: 0 0 15px rgba(255,51,102,0.4);
  animation: recPulse 0.5s infinite alternate;
}

@keyframes recPulse {
  from { box-shadow: 0 0 8px rgba(255,51,102,0.3); }
  to { box-shadow: 0 0 20px rgba(255,51,102,0.6); }
}

/* ── Home Screen ────────────────────────────────────── */
.home-scroll {
  flex: 1; overflow-y: auto;
  padding: 14px; display: flex;
  flex-direction: column; gap: 14px;
}

/* HUD corners decoration */
.hud-panel {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 14px;
  position: relative;
}

.hud-panel::before, .hud-panel::after {
  content: '';
  position: absolute;
  width: 10px; height: 10px;
}

.hud-panel::before {
  top: -1px; left: -1px;
  border-top: 2px solid var(--cyan);
  border-left: 2px solid var(--cyan);
}

.hud-panel::after {
  bottom: -1px; right: -1px;
  border-bottom: 2px solid var(--gold);
  border-right: 2px solid var(--gold);
}

.panel-label {
  font-family: 'Orbitron', sans-serif;
  font-size: 9px;
  font-weight: 600;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: var(--text3);
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.panel-label::after {
  content: '';
  flex: 1;
  height: 1px;
  background: linear-gradient(90deg, var(--border), transparent);
}

/* Last message */
.last-message-card {
  display: flex; gap: 12px; align-items: flex-start;
}

.card-avatar {
  width: 28px; height: 28px; border-radius: 50%;
  border: 1px solid var(--cyan);
  display: flex; align-items: center; justify-content: center;
  font-family: 'Orbitron', sans-serif; font-size: 10px;
  color: var(--cyan); background: var(--bg3); flex-shrink: 0;
}

#lastMessage {
  font-size: 13px; color: var(--text2);
  line-height: 1.5; font-style: italic;
  font-family: 'Rajdhani', sans-serif; font-weight: 400;
}

/* Stats grid */
.stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }

.stat-card {
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px;
  position: relative; overflow: hidden;
}

.stat-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0; height: 1px;
  background: var(--cyan);
  opacity: 0.3;
}

.stat-label {
  font-family: 'Orbitron', sans-serif;
  font-size: 8px; letter-spacing: 2px;
  color: var(--text3); text-transform: uppercase;
  margin-bottom: 6px;
}

.stat-value {
  font-family: 'Orbitron', sans-serif;
  font-size: 22px; font-weight: 700;
  color: var(--cyan);
  text-shadow: var(--glow-cyan);
  transition: all 0.2s;
}

.stat-value.updating { opacity: 0.3; transform: scale(0.9); }
.stat-value.gold { color: var(--gold); text-shadow: var(--glow-gold); }
.stat-value.green { color: var(--green); text-shadow: var(--glow-green); }

/* Streaks */
.streak-row { display: flex; gap: 8px; }

.streak-pill {
  flex: 1; background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px; display: flex;
  align-items: center; gap: 10px;
}

.streak-icon { font-size: 18px; }

.streak-info .streak-num {
  font-family: 'Orbitron', sans-serif;
  font-size: 22px; font-weight: 900;
  color: var(--gold); text-shadow: var(--glow-gold);
}

.streak-info .streak-label {
  font-size: 9px; color: var(--text3);
  letter-spacing: 1px; text-transform: uppercase;
  font-family: 'Orbitron', sans-serif;
}

/* Quick log */
.quick-log-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 6px; }

.quick-log {
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 9px 4px;
  font-family: 'Rajdhani', sans-serif;
  font-size: 12px; font-weight: 500;
  color: var(--text2);
  cursor: pointer; text-align: center;
  transition: all 0.15s; letter-spacing: 0.5px;
}

.quick-log:hover {
  border-color: var(--cyan); color: var(--cyan);
  background: rgba(0,212,255,0.05);
  box-shadow: 0 0 8px rgba(0,212,255,0.15);
}

.quick-log:active { transform: scale(0.96); }

/* Mission Briefing */
.mission-panel {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 14px;
  position: relative;
}

.mission-panel::before {
  content: '// CLASSIFIED';
  position: absolute;
  top: 8px; right: 12px;
  font-family: 'Orbitron', sans-serif;
  font-size: 8px; letter-spacing: 2px;
  color: var(--red); opacity: 0.6;
}

#missionBriefingText {
  font-family: 'Rajdhani', sans-serif;
  font-size: 13px; font-weight: 400;
  color: var(--text2); line-height: 1.6;
  min-height: 60px; margin-bottom: 12px;
  white-space: pre-line;
}

.scanning {
  color: var(--cyan);
  animation: textFlicker 0.15s infinite;
}

.btn-hud {
  background: transparent;
  border: 1px solid var(--gold);
  border-radius: var(--radius);
  padding: 8px 14px;
  font-family: 'Orbitron', sans-serif;
  font-size: 10px; font-weight: 600;
  letter-spacing: 2px; color: var(--gold);
  cursor: pointer;
  transition: all 0.15s; text-transform: uppercase;
}

.btn-hud:hover {
  background: rgba(245,166,35,0.1);
  box-shadow: var(--glow-gold);
}

.btn-hud:disabled { opacity: 0.4; cursor: not-allowed; }

/* ── Streaks Screen ─────────────────────────────────── */
.streaks-scroll {
  flex: 1; overflow-y: auto;
  padding: 14px; display: flex;
  flex-direction: column; gap: 12px;
}

.streak-card {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 16px;
}

.streak-card-title {
  font-family: 'Orbitron', sans-serif;
  font-size: 11px; font-weight: 600;
  letter-spacing: 2px; color: var(--cyan);
  text-transform: uppercase; margin-bottom: 14px;
  text-shadow: var(--glow-cyan);
}

.streak-numbers { display: flex; gap: 30px; }

.streak-stat .num {
  font-family: 'Orbitron', sans-serif;
  font-size: 36px; font-weight: 900;
  color: var(--gold); text-shadow: var(--glow-gold); line-height: 1;
}

.streak-stat .lbl {
  font-size: 10px; color: var(--text3);
  letter-spacing: 1.5px; text-transform: uppercase;
  font-family: 'Orbitron', sans-serif; margin-top: 4px;
}

.history-row {
  display: flex; align-items: center;
  gap: 10px; padding: 9px 0;
  border-bottom: 1px solid var(--border);
  font-size: 12px;
}
.history-row:last-child { border-bottom: none; }

.hist-date {
  color: var(--text3); font-size: 10px; flex: 1;
  font-family: 'Orbitron', sans-serif; letter-spacing: 1px;
}

.hist-pill {
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 3px;
  padding: 2px 8px;
  font-size: 11px; color: var(--text2);
  font-family: 'Rajdhani', sans-serif;
}

.empty-state {
  color: var(--text3); font-size: 12px;
  font-family: 'Orbitron', sans-serif;
  letter-spacing: 1px; padding: 20px;
  text-align: center;
}

/* ── Settings Screen ────────────────────────────────── */
.settings-scroll {
  flex: 1; overflow-y: auto;
  padding: 14px; display: flex;
  flex-direction: column; gap: 12px;
}

.settings-card {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 14px;
}

.settings-card h3 {
  font-family: 'Orbitron', sans-serif;
  font-size: 10px; font-weight: 600;
  letter-spacing: 2px; color: var(--cyan);
  text-transform: uppercase; margin-bottom: 4px;
}

.settings-card p {
  font-size: 12px; color: var(--text3);
  margin-bottom: 12px; line-height: 1.5;
}

.settings-card a { color: var(--gold); text-decoration: none; }

/* Provider toggle */
.provider-toggle { display: flex; gap: 8px; margin-bottom: 10px; }

.provider-btn {
  flex: 1; padding: 8px;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  font-family: 'Orbitron', sans-serif;
  font-size: 10px; letter-spacing: 1px;
  color: var(--text3); cursor: pointer;
  transition: all 0.15s; text-transform: uppercase;
}

.provider-btn.active {
  border-color: var(--cyan); color: var(--cyan);
  background: rgba(0,212,255,0.08);
  box-shadow: var(--glow-cyan);
}

#providerStatus {
  font-family: 'Orbitron', sans-serif;
  font-size: 9px; letter-spacing: 2px;
  color: var(--green); margin-top: 6px;
}

.input-field {
  width: 100%;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 10px 14px;
  font-family: 'Rajdhani', sans-serif;
  font-size: 14px; font-weight: 500;
  color: var(--text); outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
  margin-bottom: 8px; letter-spacing: 0.5px;
}

.input-field:focus { border-color: var(--cyan); box-shadow: 0 0 8px rgba(0,212,255,0.2); }
.input-field::placeholder { color: var(--text3); }

.btn-primary {
  width: 100%; padding: 12px;
  background: transparent;
  border: 1px solid var(--cyan);
  border-radius: var(--radius);
  font-family: 'Orbitron', sans-serif;
  font-size: 11px; font-weight: 700;
  letter-spacing: 3px; color: var(--cyan);
  cursor: pointer; text-transform: uppercase;
  transition: all 0.2s;
  box-shadow: var(--glow-cyan);
}

.btn-primary:hover { background: rgba(0,212,255,0.1); }
.btn-primary:active { transform: scale(0.98); }

.danger-zone { border-color: rgba(255,51,102,0.3); }

.btn-danger {
  width: 100%; padding: 10px;
  background: transparent;
  border: 1px solid var(--red);
  border-radius: var(--radius);
  font-family: 'Orbitron', sans-serif;
  font-size: 10px; letter-spacing: 2px;
  color: var(--red); cursor: pointer;
  text-transform: uppercase;
  transition: background 0.2s; margin-top: 8px;
}
.btn-danger:hover { background: rgba(255,51,102,0.1); }

/* ── Bottom Nav ─────────────────────────────────────── */
.bottom-nav {
  display: flex;
  background: var(--bg2);
  border-top: 1px solid var(--border);
  padding: 6px 0 10px;
  flex-shrink: 0;
  position: relative;
}

.bottom-nav::before {
  content: '';
  position: absolute;
  top: 0; left: 10%; right: 10%; height: 1px;
  background: linear-gradient(90deg, transparent, var(--cyan), transparent);
}

.nav-btn {
  flex: 1; display: flex;
  flex-direction: column; align-items: center;
  gap: 3px; background: none; border: none;
  cursor: pointer; padding: 6px 0;
  color: var(--text3);
  font-family: 'Orbitron', sans-serif;
  font-size: 8px; letter-spacing: 1px;
  text-transform: uppercase; transition: color 0.2s;
}

.nav-btn svg { width: 18px; height: 18px; }
.nav-btn.active { color: var(--cyan); text-shadow: var(--glow-cyan); }
.nav-btn.active svg { filter: drop-shadow(0 0 4px rgba(0,212,255,0.6)); }

/* ── Toast ──────────────────────────────────────────── */
#toast {
  position: fixed;
  bottom: 75px; left: 50%;
  transform: translateX(-50%) translateY(15px);
  background: var(--bg3);
  border: 1px solid var(--border2);
  color: var(--cyan);
  padding: 8px 18px;
  border-radius: var(--radius);
  font-family: 'Orbitron', sans-serif;
  font-size: 10px; letter-spacing: 1.5px;
  opacity: 0; transition: all 0.3s;
  pointer-events: none; white-space: nowrap;
  z-index: 100; text-transform: uppercase;
  box-shadow: var(--glow-cyan);
}

#toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
